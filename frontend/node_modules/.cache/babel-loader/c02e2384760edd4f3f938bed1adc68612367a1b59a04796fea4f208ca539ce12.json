{"ast":null,"code":"var _jsxFileName = \"C:\\\\expense-tracker\\\\frontend\\\\src\\\\context\\\\TransactionContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useCallback } from 'react';\nimport { transactionsAPI } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TransactionContext = /*#__PURE__*/createContext();\nexport const TransactionProvider = ({\n  children\n}) => {\n  _s();\n  // core data\n  const [transactions, setTransactions] = useState([]);\n  const [total, setTotal] = useState(0);\n\n  // pagination\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  // filters (Explorer uses these)\n  const [searchTerm, setSearchTerm] = useState('');\n  const [category, setCategory] = useState('All');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n  const [minAmount, setMinAmount] = useState('');\n\n  // ui state\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // build params for API from current filters + page\n  const buildParams = useCallback((override = {}) => ({\n    page,\n    limit: 20,\n    search: searchTerm || undefined,\n    category: category || undefined,\n    dateFrom: dateFrom || undefined,\n    dateTo: dateTo || undefined,\n    minAmount: minAmount || undefined,\n    ...override\n  }), [page, searchTerm, category, dateFrom, dateTo, minAmount]);\n\n  // fetch page (used for initial load & infinite scroll)\n  const fetchTransactions = useCallback(async (overrideParams = {}) => {\n    setLoading(true);\n    setError('');\n    try {\n      const params = buildParams(overrideParams);\n      const res = await transactionsAPI.getAll(params);\n      const {\n        transactions: list,\n        total: count,\n        hasMore: more\n      } = res.data;\n\n      // if we are on page 1 or override says reset, replace; otherwise append\n      if (params.page === 1 || overrideParams.reset) {\n        setTransactions(list);\n      } else {\n        setTransactions(prev => [...prev, ...list]);\n      }\n      setTotal(count);\n      setHasMore(more);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Failed to load transactions');\n    } finally {\n      setLoading(false);\n    }\n  }, [buildParams]);\n\n  // initial load\n  useEffect(() => {\n    fetchTransactions({\n      page: 1,\n      reset: true\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // when filters change, reset to page 1 and reload\n  useEffect(() => {\n    setPage(1);\n    fetchTransactions({\n      page: 1,\n      reset: true\n    });\n  }, [searchTerm, category, dateFrom, dateTo, minAmount]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // infinite scroll: load next page\n  const loadMore = async () => {\n    if (!hasMore || loading) return;\n    const nextPage = page + 1;\n    setPage(nextPage);\n    await fetchTransactions({\n      page: nextPage\n    });\n  };\n\n  // CRUD operations\n  const addTransaction = async data => {\n    try {\n      const res = await transactionsAPI.create(data);\n      // prepend new transaction at top, keep list consistent with filters if it matches\n      setTransactions(prev => [res.data, ...prev]);\n      setTotal(prev => prev + 1);\n    } catch (err) {\n      throw err;\n    }\n  };\n  const updateTransaction = async (id, data) => {\n    try {\n      const res = await transactionsAPI.update(id, data);\n      setTransactions(prev => prev.map(t => t._id === id ? res.data : t));\n    } catch (err) {\n      throw err;\n    }\n  };\n  const deleteTransaction = async id => {\n    try {\n      await transactionsAPI.delete(id);\n      setTransactions(prev => prev.filter(t => t._id !== id));\n      setTotal(prev => Math.max(prev - 1, 0));\n    } catch (err) {\n      throw err;\n    }\n  };\n  const clearFilters = () => {\n    setSearchTerm('');\n    setCategory('All');\n    setDateFrom('');\n    setDateTo('');\n    setMinAmount('');\n  };\n  return /*#__PURE__*/_jsxDEV(TransactionContext.Provider, {\n    value: {\n      transactions,\n      total,\n      page,\n      hasMore,\n      loading,\n      error,\n      // filters\n      searchTerm,\n      setSearchTerm,\n      category,\n      setCategory,\n      dateFrom,\n      setDateFrom,\n      dateTo,\n      setDateTo,\n      minAmount,\n      setMinAmount,\n      clearFilters,\n      // actions\n      fetchTransactions,\n      loadMore,\n      addTransaction,\n      updateTransaction,\n      deleteTransaction\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n_s(TransactionProvider, \"LgRQrkX50HSC63cCwyZn6qxC0B8=\");\n_c = TransactionProvider;\nvar _c;\n$RefreshReg$(_c, \"TransactionProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useCallback","transactionsAPI","jsxDEV","_jsxDEV","TransactionContext","TransactionProvider","children","_s","transactions","setTransactions","total","setTotal","page","setPage","hasMore","setHasMore","searchTerm","setSearchTerm","category","setCategory","dateFrom","setDateFrom","dateTo","setDateTo","minAmount","setMinAmount","loading","setLoading","error","setError","buildParams","override","limit","search","undefined","fetchTransactions","overrideParams","params","res","getAll","list","count","more","data","reset","prev","err","_err$response","_err$response$data","response","msg","loadMore","nextPage","addTransaction","create","updateTransaction","id","update","map","t","_id","deleteTransaction","delete","filter","Math","max","clearFilters","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/expense-tracker/frontend/src/context/TransactionContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useCallback } from 'react';\r\nimport { transactionsAPI } from '../utils/api';\r\n\r\nexport const TransactionContext = createContext();\r\n\r\nexport const TransactionProvider = ({ children }) => {\r\n  // core data\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  // filters (Explorer uses these)\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [category, setCategory] = useState('All');\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [minAmount, setMinAmount] = useState('');\r\n\r\n  // ui state\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // build params for API from current filters + page\r\n  const buildParams = useCallback(\r\n    (override = {}) => ({\r\n      page,\r\n      limit: 20,\r\n      search: searchTerm || undefined,\r\n      category: category || undefined,\r\n      dateFrom: dateFrom || undefined,\r\n      dateTo: dateTo || undefined,\r\n      minAmount: minAmount || undefined,\r\n      ...override\r\n    }),\r\n    [page, searchTerm, category, dateFrom, dateTo, minAmount]\r\n  );\r\n\r\n  // fetch page (used for initial load & infinite scroll)\r\n  const fetchTransactions = useCallback(\r\n    async (overrideParams = {}) => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const params = buildParams(overrideParams);\r\n        const res = await transactionsAPI.getAll(params);\r\n        const { transactions: list, total: count, hasMore: more } = res.data;\r\n\r\n        // if we are on page 1 or override says reset, replace; otherwise append\r\n        if (params.page === 1 || overrideParams.reset) {\r\n          setTransactions(list);\r\n        } else {\r\n          setTransactions(prev => [...prev, ...list]);\r\n        }\r\n\r\n        setTotal(count);\r\n        setHasMore(more);\r\n      } catch (err) {\r\n        setError(err.response?.data?.msg || 'Failed to load transactions');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [buildParams]\r\n  );\r\n\r\n  // initial load\r\n  useEffect(() => {\r\n    fetchTransactions({ page: 1, reset: true });\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // when filters change, reset to page 1 and reload\r\n  useEffect(() => {\r\n    setPage(1);\r\n    fetchTransactions({ page: 1, reset: true });\r\n  }, [searchTerm, category, dateFrom, dateTo, minAmount]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // infinite scroll: load next page\r\n  const loadMore = async () => {\r\n    if (!hasMore || loading) return;\r\n    const nextPage = page + 1;\r\n    setPage(nextPage);\r\n    await fetchTransactions({ page: nextPage });\r\n  };\r\n\r\n  // CRUD operations\r\n  const addTransaction = async (data) => {\r\n    try {\r\n      const res = await transactionsAPI.create(data);\r\n      // prepend new transaction at top, keep list consistent with filters if it matches\r\n      setTransactions(prev => [res.data, ...prev]);\r\n      setTotal(prev => prev + 1);\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const updateTransaction = async (id, data) => {\r\n    try {\r\n      const res = await transactionsAPI.update(id, data);\r\n      setTransactions(prev =>\r\n        prev.map(t => (t._id === id ? res.data : t))\r\n      );\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const deleteTransaction = async (id) => {\r\n    try {\r\n      await transactionsAPI.delete(id);\r\n      setTransactions(prev => prev.filter(t => t._id !== id));\r\n      setTotal(prev => Math.max(prev - 1, 0));\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setSearchTerm('');\r\n    setCategory('All');\r\n    setDateFrom('');\r\n    setDateTo('');\r\n    setMinAmount('');\r\n  };\r\n\r\n  return (\r\n    <TransactionContext.Provider\r\n      value={{\r\n        transactions,\r\n        total,\r\n        page,\r\n        hasMore,\r\n        loading,\r\n        error,\r\n\r\n        // filters\r\n        searchTerm,\r\n        setSearchTerm,\r\n        category,\r\n        setCategory,\r\n        dateFrom,\r\n        setDateFrom,\r\n        dateTo,\r\n        setDateTo,\r\n        minAmount,\r\n        setMinAmount,\r\n        clearFilters,\r\n\r\n        // actions\r\n        fetchTransactions,\r\n        loadMore,\r\n        addTransaction,\r\n        updateTransaction,\r\n        deleteTransaction,\r\n      }}\r\n    >\r\n      {children}\r\n    </TransactionContext.Provider>\r\n  );\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}