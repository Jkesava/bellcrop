{"ast":null,"code":"var _jsxFileName = \"C:\\\\expense-tracker\\\\frontend\\\\src\\\\context\\\\TransactionContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useCallback } from 'react';\nimport { transactionsAPI } from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TransactionContext = /*#__PURE__*/createContext(null);\nexport const TransactionProvider = ({\n  children\n}) => {\n  _s();\n  // data\n  const [transactions, setTransactions] = useState([]);\n  const [total, setTotal] = useState(0);\n\n  // pagination\n  const [page, setPage] = useState(1);\n  const [hasMore, setHasMore] = useState(true);\n\n  // filters\n  const [searchTerm, setSearchTerm] = useState('');\n  const [category, setCategory] = useState('All');\n  const [dateFrom, setDateFrom] = useState('');\n  const [dateTo, setDateTo] = useState('');\n  const [minAmount, setMinAmount] = useState('');\n\n  // ui\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const buildParams = useCallback((override = {}) => ({\n    page,\n    limit: 20,\n    search: searchTerm || undefined,\n    category: category || undefined,\n    dateFrom: dateFrom || undefined,\n    dateTo: dateTo || undefined,\n    minAmount: minAmount || undefined,\n    ...override\n  }), [page, searchTerm, category, dateFrom, dateTo, minAmount]);\n  const fetchTransactions = useCallback(async (overrideParams = {}) => {\n    setLoading(true);\n    setError('');\n    try {\n      const params = buildParams(overrideParams);\n      const res = await transactionsAPI.getAll(params);\n      const {\n        transactions: list,\n        total: count,\n        hasMore: more\n      } = res.data;\n      if (params.page === 1 || overrideParams.reset) {\n        setTransactions(list);\n      } else {\n        setTransactions(prev => [...prev, ...list]);\n      }\n      setTotal(count);\n      setHasMore(more);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'Failed to load transactions');\n    } finally {\n      setLoading(false);\n    }\n  }, [buildParams]);\n\n  // initial load\n  useEffect(() => {\n    fetchTransactions({\n      page: 1,\n      reset: true\n    });\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // reload when filters change\n  useEffect(() => {\n    setPage(1);\n    fetchTransactions({\n      page: 1,\n      reset: true\n    });\n  }, [searchTerm, category, dateFrom, dateTo, minAmount]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const loadMore = async () => {\n    if (!hasMore || loading) return;\n    const nextPage = page + 1;\n    setPage(nextPage);\n    await fetchTransactions({\n      page: nextPage\n    });\n  };\n\n  // CRUD\n  const addTransaction = async data => {\n    const res = await transactionsAPI.create(data);\n    setTransactions(prev => [res.data, ...prev]);\n    setTotal(prev => prev + 1);\n  };\n  const updateTransaction = async (id, data) => {\n    const res = await transactionsAPI.update(id, data);\n    setTransactions(prev => prev.map(t => t.id === id || t._id === id ? res.data : t));\n  };\n  const deleteTransaction = async id => {\n    await transactionsAPI.delete(id);\n    setTransactions(prev => prev.filter(t => t.id !== id && t._id !== id));\n    setTotal(prev => Math.max(prev - 1, 0));\n  };\n  const clearFilters = () => {\n    setSearchTerm('');\n    setCategory('All');\n    setDateFrom('');\n    setDateTo('');\n    setMinAmount('');\n  };\n  return /*#__PURE__*/_jsxDEV(TransactionContext.Provider, {\n    value: {\n      transactions,\n      total,\n      page,\n      hasMore,\n      loading,\n      error,\n      searchTerm,\n      setSearchTerm,\n      category,\n      setCategory,\n      dateFrom,\n      setDateFrom,\n      dateTo,\n      setDateTo,\n      minAmount,\n      setMinAmount,\n      clearFilters,\n      fetchTransactions,\n      loadMore,\n      addTransaction,\n      updateTransaction,\n      deleteTransaction\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n};\n_s(TransactionProvider, \"LgRQrkX50HSC63cCwyZn6qxC0B8=\");\n_c = TransactionProvider;\nvar _c;\n$RefreshReg$(_c, \"TransactionProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useCallback","transactionsAPI","jsxDEV","_jsxDEV","TransactionContext","TransactionProvider","children","_s","transactions","setTransactions","total","setTotal","page","setPage","hasMore","setHasMore","searchTerm","setSearchTerm","category","setCategory","dateFrom","setDateFrom","dateTo","setDateTo","minAmount","setMinAmount","loading","setLoading","error","setError","buildParams","override","limit","search","undefined","fetchTransactions","overrideParams","params","res","getAll","list","count","more","data","reset","prev","err","_err$response","_err$response$data","console","response","msg","loadMore","nextPage","addTransaction","create","updateTransaction","id","update","map","t","_id","deleteTransaction","delete","filter","Math","max","clearFilters","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/expense-tracker/frontend/src/context/TransactionContext.js"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useState,\r\n  useEffect,\r\n  useCallback,\r\n} from 'react';\r\nimport { transactionsAPI } from '../utils/api';\r\n\r\nexport const TransactionContext = createContext(null);\r\n\r\nexport const TransactionProvider = ({ children }) => {\r\n  // data\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  // pagination\r\n  const [page, setPage] = useState(1);\r\n  const [hasMore, setHasMore] = useState(true);\r\n\r\n  // filters\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [category, setCategory] = useState('All');\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [minAmount, setMinAmount] = useState('');\r\n\r\n  // ui\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const buildParams = useCallback(\r\n    (override = {}) => ({\r\n      page,\r\n      limit: 20,\r\n      search: searchTerm || undefined,\r\n      category: category || undefined,\r\n      dateFrom: dateFrom || undefined,\r\n      dateTo: dateTo || undefined,\r\n      minAmount: minAmount || undefined,\r\n      ...override,\r\n    }),\r\n    [page, searchTerm, category, dateFrom, dateTo, minAmount]\r\n  );\r\n\r\n  const fetchTransactions = useCallback(\r\n    async (overrideParams = {}) => {\r\n      setLoading(true);\r\n      setError('');\r\n      try {\r\n        const params = buildParams(overrideParams);\r\n        const res = await transactionsAPI.getAll(params);\r\n        const { transactions: list, total: count, hasMore: more } = res.data;\r\n\r\n        if (params.page === 1 || overrideParams.reset) {\r\n          setTransactions(list);\r\n        } else {\r\n          setTransactions((prev) => [...prev, ...list]);\r\n        }\r\n\r\n        setTotal(count);\r\n        setHasMore(more);\r\n      } catch (err) {\r\n        console.error(err);\r\n        setError(err.response?.data?.msg || 'Failed to load transactions');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    },\r\n    [buildParams]\r\n  );\r\n\r\n  // initial load\r\n  useEffect(() => {\r\n    fetchTransactions({ page: 1, reset: true });\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  // reload when filters change\r\n  useEffect(() => {\r\n    setPage(1);\r\n    fetchTransactions({ page: 1, reset: true });\r\n  }, [searchTerm, category, dateFrom, dateTo, minAmount]); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  const loadMore = async () => {\r\n    if (!hasMore || loading) return;\r\n    const nextPage = page + 1;\r\n    setPage(nextPage);\r\n    await fetchTransactions({ page: nextPage });\r\n  };\r\n\r\n  // CRUD\r\n  const addTransaction = async (data) => {\r\n    const res = await transactionsAPI.create(data);\r\n    setTransactions((prev) => [res.data, ...prev]);\r\n    setTotal((prev) => prev + 1);\r\n  };\r\n\r\n  const updateTransaction = async (id, data) => {\r\n    const res = await transactionsAPI.update(id, data);\r\n    setTransactions((prev) =>\r\n      prev.map((t) => (t.id === id || t._id === id ? res.data : t))\r\n    );\r\n  };\r\n\r\n  const deleteTransaction = async (id) => {\r\n    await transactionsAPI.delete(id);\r\n    setTransactions((prev) => prev.filter((t) => t.id !== id && t._id !== id));\r\n    setTotal((prev) => Math.max(prev - 1, 0));\r\n  };\r\n\r\n  const clearFilters = () => {\r\n    setSearchTerm('');\r\n    setCategory('All');\r\n    setDateFrom('');\r\n    setDateTo('');\r\n    setMinAmount('');\r\n  };\r\n\r\n  return (\r\n    <TransactionContext.Provider\r\n      value={{\r\n        transactions,\r\n        total,\r\n        page,\r\n        hasMore,\r\n        loading,\r\n        error,\r\n        searchTerm,\r\n        setSearchTerm,\r\n        category,\r\n        setCategory,\r\n        dateFrom,\r\n        setDateFrom,\r\n        dateTo,\r\n        setDateTo,\r\n        minAmount,\r\n        setMinAmount,\r\n        clearFilters,\r\n        fetchTransactions,\r\n        loadMore,\r\n        addTransaction,\r\n        updateTransaction,\r\n        deleteTransaction,\r\n      }}\r\n    >\r\n      {children}\r\n    </TransactionContext.Provider>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}